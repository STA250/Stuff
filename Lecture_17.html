<!DOCTYPE html>
<html>
<head>
  <title>STA 250 Lecture 17</title>
  <meta charset="utf-8">
  <meta name="description" content="STA 250 Lecture 17">
  <meta name="author" content="Paul D. Baines">
  <meta name="generator" content="slidify" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/default.css" media="all" >
  <link rel="stylesheet" href="libraries/frameworks/io2012/phone.css" 
    media="only screen and (max-device-width: 480px)" >
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/slidify.css" >
  <link rel="stylesheet" href="libraries/highlighters/highlight.js/css/tomorrow.css" />
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->
  <script data-main="libraries/frameworks/io2012/js/slides" 
    src="libraries/frameworks/io2012/js/require-1.0.8.min.js">
  </script>
  
    <link rel="stylesheet" href = "libraries/widgets/quiz/css/jquery-quiz.css">
<link rel="stylesheet" href = "libraries/widgets/bootstrap/css/bootstrap.css">
<link rel="stylesheet" href = "libraries/widgets/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" href = "assets/css/ribbons.css">

</head>
<body style="opacity: 0">
  <slides class="layout-widescreen">
    
    <!-- LOGO SLIDE -->
    <!-- END LOGO SLIDE -->
    

    <!-- TITLE SLIDE -->
    <!-- Should I move this to a Local Layout File? -->
    <slide class="title-slide segue nobackground">
      <hgroup class="auto-fadein">
        <h1>STA 250 Lecture 17</h1>
        <h2>Advanced Statistical Computation</h2>
        <p>Paul D. Baines<br/></p>
      </hgroup>
          </slide>

    <!-- SLIDES -->
      <slide class="" id="slide-1" style="background:;">
  <hgroup>
    
  </hgroup>
  <article>
    
  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-2" style="background:;">
  <hgroup>
    <h2>Pearson and Lipschitz</h2>
  </hgroup>
  <article>
    <p>To monitor GPU usage on Pearson and Lipshitz:</p>

<pre><code>ssh username@pearson.ucdavis.edu nvidia-smi -l
ssh username@lipschitz.ucdavis.edu nvidia-smi -l
</code></pre>

<p>To see who else is logged on:</p>

<pre><code>finger
</code></pre>

<p>Note: </p>

<ul>
<li>Those using <code>RCUDA</code> should use <code>lipschitz</code></li>
<li>Those using <code>PyCUDA</code> should use <code>pearson</code></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-3" style="background:;">
  <hgroup>
    <h2>Arrays of Threads</h2>
  </hgroup>
  <article>
    <p><img src="pics/Arrays_of_Threads.jpg" style="width: 600px;"/></p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-4" style="background:;">
  <hgroup>
    <h2>Thread Batching</h2>
  </hgroup>
  <article>
    <p><img src="pics/Thread_Batching.jpg" style="width: 600px;"/></p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-5" style="background:;">
  <hgroup>
    <h2>The NVIDIA Compiler</h2>
  </hgroup>
  <article>
    <p>CUDA code is compiled by the NVIDIA compiler <code>nvcc</code>, which functions
in much the same way as <code>gcc</code> and <code>g++</code> for those familiar with C and
C++. Linking and header files require care (just as they do with 
vanilla C/C++).</p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-6" style="background:;">
  <hgroup>
    <h2>Example CUDA Program</h2>
  </hgroup>
  <article>
    <p>My example, modified from some code on the NVIDIA forums:</p>

<p>See <code>CUDA_example_01.cu</code></p>

<p>Compile with:</p>

<pre><code>nvcc CUDA_example_01.cu # plain: makes a.out
nvcc CUDA_example_01.cu -use_fast_math -o CUDA_example_01.out
</code></pre>

<p>Run with:</p>

<pre><code>./CUDA_example_01.out
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-7" style="background:;">
  <hgroup>
    <h2>Compiling Schematic</h2>
  </hgroup>
  <article>
    <p><img src="pics/NVCC_Compiling.jpg" style="width: 700px;"/></p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-8" style="background:;">
  <hgroup>
    <h2>Kernel Memory Access</h2>
  </hgroup>
  <article>
    <p><img src="pics/Kernel_Memory_Levels.jpg" style="width: 700px;"/></p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-9" style="background:;">
  <hgroup>
    <h2>CUDA Variable Types</h2>
  </hgroup>
  <article>
    <p><img src="pics/CUDA_Variable_Types.jpg" style="width: 700px;"/></p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-10" style="background:;">
  <hgroup>
    <h2>CUDA Variable Performance</h2>
  </hgroup>
  <article>
    <p><img src="pics/CUDA_Variable_Performance.jpg" style="width: 700px;"/></p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-11" style="background:;">
  <hgroup>
    <h2>CUDA Variable Scale</h2>
  </hgroup>
  <article>
    <p><img src="pics/CUDA_Variable_Type_Scale.jpg" style="width: 700px;"/></p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-12" style="background:;">
  <hgroup>
    <h2>CUDA Performance Example</h2>
  </hgroup>
  <article>
    <p><img src="pics/GPU_example_time.jpg" style="width: 600px;"/>
<br/>
Credit: CS264 (N. Pinto)</p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-13" style="background:;">
  <hgroup>
    <h2>Perspective on GPU&#39;s</h2>
  </hgroup>
  <article>
    <p><strong>What tasks are they good for?</strong><br/>
<br/></p>

<ul class = "build">
<li>&#9786; Numerical integration (nearly always)</li>
<li>&#9786; (Very) slow iteration MCMC (use within-iteration parallelism)</li>
<li>&#9786; &quot;Simple&quot; bootstraps</li>
<li>&#9786; Particle Filtering (Sequential Monte Carlo)</li>
<li>&#9786; (Extremely difficult) brute force optimization</li>
<li>&#9786; Large matrix calculations (with sufficient expertise)</li>
<li>&#9786; Single-use applications</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-14" style="background:;">
  <hgroup>
    <h2>Perspective on GPU&#39;s</h2>
  </hgroup>
  <article>
    <p><strong>What tasks are they not good for?</strong><br/>
<br/></p>

<ul class = "build">
<li>&#9785; Fast iteration MCMC</li>
<li>&#9785; &quot;Difficult&quot; bootstraps</li>
<li>&#9785; (Many) optimization problems </li>
<li>&#9785; Methodological work (portable code) [may change]</li>
<li>&#9785; Any problem that is not worth the additional effort...</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-15" style="background:;">
  <hgroup>
    <h2>Resources</h2>
  </hgroup>
  <article>
    <ul class = "build">
<li><a href="http://www.nvidia.com/object/cuda_home_new.html">http://www.nvidia.com/object/cuda_home_new.html</a></li>
<li><a href="http://developer.nvidia.com/cuda-downloads">http://developer.nvidia.com/cuda-downloads</a></li>
<li><a href="http://developer.nvidia.com/nvidia-gpu-computing-documentation">http://developer.nvidia.com/nvidia-gpu-computing-documentation</a></li>
<li><a href="http://developer.nvidia.com/cuda-training#2">http://developer.nvidia.com/cuda-training#2</a></li>
<li><a href="http://developer.nvidia.com/getting-started-parallel-computing">http://developer.nvidia.com/getting-started-parallel-computing</a></li>
<li><a href="http://docs.nvidia.com/cuda/">http://docs.nvidia.com/cuda/</a> CUDA Documentation</li>
<li><a href="http://docs.nvidia.com/cuda/cublas/">http://docs.nvidia.com/cuda/cublas/</a> CUBLAS Documentation</li>
<li><a href="http://www.nvidia.com/content/cudazone/download/Advanced_CUDA_Training_NVISION08.pdf">http://www.nvidia.com/content/cudazone/download/Advanced_CUDA_Training_NVISION08.pdf</a> Advanced CUDA Slides (NVIDIA)</li>
<li><a href="http://people.maths.ox.ac.uk/gilesm/cuda/lecs/lecs.pdf">http://people.maths.ox.ac.uk/gilesm/cuda/lecs/lecs.pdf</a> Mike Giles&#39; CUDA Slides</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-16" style="background:;">
  <hgroup>
    <h2>Getting started:</h2>
  </hgroup>
  <article>
    <ul class = "build">
<li>Find a CUDA-enabled computer and install CUDA first!</li>
<li>For those without an NVIDIA GPU, use Pearson + Gauss</li>
<li>NVIDIA GPU Computing SDK has lots of (rich) examples</li>
<li>Work through lecture examples, try to modify</li>
<li>See lecture links on course website for more examples</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-17" style="background:;">
  <hgroup>
    <h2>GPU-accelerated Libraries</h2>
  </hgroup>
  <article>
    <ul class = "build">
<li>Thrust (C++ STL-type library)</li>
<li>CULA (CUDA implementation of LAPACK and BLAS, dense &amp; sparse by Photonics)</li>
<li>cuBLAS (CUDA implementation of BLAS by NVIDIA)</li>
<li>cuSPARSE (CUDA implementation for sparse matrices by NVIDIA)</li>
<li>cuRAND (CUDA random number generation by NVIDIA)</li>
<li>CUDA Math Library (by NVIDIA)</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-18" style="background:;">
  <hgroup>
    <h2>Other Interfaces to GPUs</h2>
  </hgroup>
  <article>
    <ul class = "build">
<li>PyCUDA :: <a href="http://documen.tician.de/pycuda/">http://documen.tician.de/pycuda/</a></li>
<li>PyOpenCL :: <a href="http://documen.tician.de/pyopencl/">http://documen.tician.de/pyopencl/</a></li>
<li>RCUDA :: <a href="https://github.com/duncantl/RCUDA">https://github.com/duncantl/RCUDA</a></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-19" style="background:;">
  <hgroup>
    <h2>RCUDA</h2>
  </hgroup>
  <article>
    <p><code>RCUDA</code> provides full bindings to the NVIDIA CUDA API for <code>R</code> users i.e., it provides
a mechanism to call any function within the CUDA API from within R. In addition to this,
it also provides higher level functionality that can hide some of the memory
management associated with CUDA.</p>

<ul>
<li>Kernels still need to be written in CUDA C.</li>
<li>Kernels are compiled to <code>ptx</code> code using <code>nvcc --ptx</code></li>
<li>Kernels are loaded via modules into R</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-20" style="background:;">
  <hgroup>
    <h2>RCUDA</h2>
  </hgroup>
  <article>
    <p>See demo code and examples...</p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-21" style="background:;">
  <hgroup>
    <h2>That is enough for today... :)</h2>
  </hgroup>
  <article>
    <p><img src="pics/sneaky.gif" alt="Keep Off" align="middle" style="width: 500px;"/></p>

<p><br/><a href="http://www.pbh2.com/wordpress/wp-content/uploads/2012/08/funniest-dog-gifs-clever-dog.gif">Source</a>. Wed: More GPUs.*</p>

  </article>
  <!-- Presenter Notes -->
</slide>

    <slide class="backdrop"></slide>
  </slides>

  <!--[if IE]>
    <script 
      src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js">  
    </script>
    <script>CFInstall.check({mode: 'overlay'});</script>
  <![endif]-->
</body>
<!-- Grab CDN jQuery, fall back to local if offline -->
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js"></script>
<script>window.jQuery || document.write('<script src="libraries/widgets/quiz/js/jquery-1.7.min.js"><\/script>')</script>
<!-- Load Javascripts for Widgets -->
<!-- MathJax: Fall back to local if CDN offline but local image fonts are not supported (saves >100MB) -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']],
      processEscapes: true
    }
  });
</script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<!-- <script src="https://c328740.ssl.cf1.rackcdn.com/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script> -->
<script>window.MathJax || document.write('<script type="text/x-mathjax-config">MathJax.Hub.Config({"HTML-CSS":{imageFont:null}});<\/script><script src="libraries/widgets/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"><\/script>')
</script>
<script src='libraries/widgets/quiz/js/jquery.quiz.js'></script>
<script src='libraries/widgets/quiz/js/mustache.min.js'></script>
<script type="text/javascript">
 $('.quiz').find('li:has(em)').addClass('quiz-answer')
 $('li.quiz-answer em').replaceWith(function(){
   return $(this).contents()
 })
 $('.quiz').find('li').addClass('quiz-option')
 $.quiz();
</script>
<script src='libraries/widgets/bootstrap/js/bootstrap.min.js'></script>
<script>  
$(function (){ 
  $("#example").popover(); 
  $("[rel='tooltip']").tooltip(); 
});  
</script>  
<!-- LOAD HIGHLIGHTER JS FILES -->
<script src="libraries/highlighters/highlight.js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<!-- DONE LOADING HIGHLIGHTER JS FILES -->
</html>